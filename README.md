<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# dnsclient

```go
import "github.com/mosajjal/dnsclient"
```

Package dnsclient provides a minimal DNS client library. It provides native support for \- Dns Over UDP \- DNS Over TCP \- DNS Over HTTPS \(DoH\) \- DNS Over TLS \(DoT\) \- DNS Over QUIC \(DoQ\)

## Index

- [type ClassicDNS](<#type-classicdns>)
  - [func (c ClassicDNS) Query(ctx context.Context, q *dns.Msg) (responses []dns.RR, rtt time.Duration, err error)](<#func-classicdns-query>)
- [type Client](<#type-client>)
  - [func New(uri string, skipVerify bool) (Client, error)](<#func-new>)
  - [func NewClassicDNS(server net.Addr, UseTCP bool, UseTLS bool, SkipVerify bool) (Client, error)](<#func-newclassicdns>)
  - [func NewDoHClient(server url.URL, SkipVerify bool) (Client, error)](<#func-newdohclient>)
  - [func NewDoQClient(server string, SkipVerify bool) (Client, error)](<#func-newdoqclient>)
- [type DoHClient](<#type-dohclient>)
  - [func (c DoHClient) Query(ctx context.Context, msg *dns.Msg) ([]dns.RR, time.Duration, error)](<#func-dohclient-query>)
- [type DoQClient](<#type-doqclient>)
  - [func (c DoQClient) Query(ctx context.Context, msg *dns.Msg) (responses []dns.RR, rtt time.Duration, err error)](<#func-doqclient-query>)


## type [ClassicDNS](<https://github.com/mosajjal/dnsclient/blob/main/classic.go#L14-L16>)

ClassicDNS provides functionality to create DNS over UDP, DNS over TCP and DNS over TLS

```go
type ClassicDNS struct {
    // contains filtered or unexported fields
}
```

### func \(ClassicDNS\) [Query](<https://github.com/mosajjal/dnsclient/blob/main/classic.go#L53>)

```go
func (c ClassicDNS) Query(ctx context.Context, q *dns.Msg) (responses []dns.RR, rtt time.Duration, err error)
```

Query takes a dns message and returns a list of resources

## type [Client](<https://github.com/mosajjal/dnsclient/blob/main/dnsclient.go#L40-L42>)

### Client Provides a unified interface for DNS queries

```
func main() {
	msg := dns.Msg{}
	msg.RecursionDesired = true
	msg.Question = []dns.Question{{
		Name:   "example.com.",
		Qtype:  dns.StringToType["A"],
		Qclass: dns.ClassINET,
	}}

	addr := &net.UDPAddr{
		IP:   net.IPv4(1, 1, 1, 1),
		Port: 53,
	}
	c, _ := dnsclient.NewClassicDNS(addr, false, false, false)
	response, ttr, err := c.Query(context.Background(), &msg)
	fmt.Printf("Query: %v, Response: %v, Time to Respond: %s, Error: %v", msg, response, ttr, err)
}
```

```go
type Client interface {
    Query(context.Context, *dns.Msg) ([]dns.RR, time.Duration, error)
}
```

### func [New](<https://github.com/mosajjal/dnsclient/blob/main/dnsclient.go#L55>)

```go
func New(uri string, skipVerify bool) (Client, error)
```

New creates a DNS Client by parsing a URI and returning the appropriate client for it URI string could look like below:

```
- udp://1.1.1.1:53
- udp6://[2606:4700:4700::1111]:53
- tcp://9.9.9.9:5353
- https://dns.adguard.com
- quic://dns.adguard.com:8853
- tls://dns.adguard.com:853
```

### func [NewClassicDNS](<https://github.com/mosajjal/dnsclient/blob/main/classic.go#L19>)

```go
func NewClassicDNS(server net.Addr, UseTCP bool, UseTLS bool, SkipVerify bool) (Client, error)
```

NewClassicDNS provides a client interface which you can query on

### func [NewDoHClient](<https://github.com/mosajjal/dnsclient/blob/main/doh.go#L25>)

```go
func NewDoHClient(server url.URL, SkipVerify bool) (Client, error)
```

NewDoHClient creates a new DoH client

### func [NewDoQClient](<https://github.com/mosajjal/dnsclient/blob/main/doq.go#L21>)

```go
func NewDoQClient(server string, SkipVerify bool) (Client, error)
```

NewDoQClient creates a new DoQ client

## type [DoHClient](<https://github.com/mosajjal/dnsclient/blob/main/doh.go#L18-L22>)

DoHClient encapsulates all functions and attributes for a DoH client

```go
type DoHClient struct {
    Session httptrace.ClientTrace
    URL     url.URL
    // contains filtered or unexported fields
}
```

### func \(DoHClient\) [Query](<https://github.com/mosajjal/dnsclient/blob/main/doh.go#L40>)

```go
func (c DoHClient) Query(ctx context.Context, msg *dns.Msg) ([]dns.RR, time.Duration, error)
```

Query performs a DoH query

## type [DoQClient](<https://github.com/mosajjal/dnsclient/blob/main/doq.go#L15-L18>)

DoQClient encapsulates all functions and attributes for a DoH client

```go
type DoQClient struct {
    // contains filtered or unexported fields
}
```

### func \(DoQClient\) [Query](<https://github.com/mosajjal/dnsclient/blob/main/doq.go#L43>)

```go
func (c DoQClient) Query(ctx context.Context, msg *dns.Msg) (responses []dns.RR, rtt time.Duration, err error)
```

Query performs the DNS transaction



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
